@model DK_NVQS.ViewModel.HealthRecordListVM

@{
    ViewBag.Title = "Danh sách hồ sơ khám sức khỏe";
}

<h2>Danh sách hồ sơ khám sức khỏe</h2>

<div>
    @using (Html.BeginForm("List", "HealthRecord", FormMethod.Get))
    {
        <div>
            <label for="citizenID">Citizen ID:</label>
            <input type="text" id="citizenID" name="citizenID" value="@Model.CitizenID" />
        </div>
        <div>
            <label for="year">Year:</label>
            <input type="number" id="year" name="year" value="@Model.Year" />
        </div>
        <div>
            <label for="isSubclinical">Subclinical:</label>
            <input type="checkbox" id="isSubclinical" name="isSubclinical" @(Model.IsSubclinical.HasValue && Model.IsSubclinical.Value ? "checked" : "") />
        </div>
        <div>
            <label for="isClinical">Clinical:</label>
            <input type="checkbox" id="isClinical" name="isClinical" @(Model.IsClinical.HasValue && Model.IsClinical.Value ? "checked" : "") />
        </div>
        <button type="submit">Filter</button>
    }
</div>

@if (Model.HealthRecords.Any())
{
    <table class="table">
        <thead>
            <tr>
                <th>Số CCCD</th>
                <th>Ngày</th>
                <th>Hồ sơ khám cận lâm sàng</th>
                <th>Hồ sơ khám lâm sàng</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var record in Model.HealthRecords)
            {
                <tr>
                    <td>@record.Citizen.CitizenID</td>
                    <td>@record.Date.Year</td>
                    <td>
                        <a href="@Url.Action("Detail", "Subclinical", new { recordId = record.RecordID })">Xem</a>
                    </td>
                    <td>
                        <a href="@Url.Action("Detail", "Clinical", new { recordId = record.RecordID })">Xem</a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}
else
{
    <p>Không tìm thấy hồ sơ</p>
}
